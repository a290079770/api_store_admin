webpackJsonp([4],{563:function(e,t,a){a(596);var s=a(222)(a(575),a(613),null,null);e.exports=s.exports},575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){function e(e,t,a){/[^a-zA-Z0-9_]/g.test(t)?a(new Error("不能存在特殊字符！")):a()}return{winWidth:window.innerWidth,winHeight:window.innerHeight,isSuperAdmin:3==JSON.parse(sessionStorage.userInfo).UserType,toolsShow:!1,dataList:[],dialogVisible:!1,aa:"",shenhe:"全部",selectType:"全部",keyWord:"",labelPosition:"right",formLabelAlign:{Account:"",Password:"",NickName:""},formRules:{Account:[{required:!0,message:"账号不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],Password:[{required:!0,message:"请输入密码！",trigger:"blur"}],NickName:[{required:!0,message:"请输入管理员昵称！",trigger:"blur"}]},state:1,pageCount:10,currentPage:1,totalCount:0}},methods:{handleUpdateUser:function(e,t){this.dialogVisible=!0,this.formLabelAlign={UserId:t.Id,RealName:t.RealName,Password:"",UserType:2==t.UserType?"专家":3==t.UserType?"管理员":"用户"}},getDataList:function(){var e=this;this.$http.get("/User/userList",{params:{ps:this.pageCount,cp:this.currentPage,keywords:this.keyWord}}).then(function(t){200==t.data.code?(e.dataList=t.data.data,e.totalCount=t.data.recordCount):e.$message.error(t.data.Description)})},handleDelete:function(e,t){var a=this;this.$confirm("确定删除该用户或管理员？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("/user/delete",{Id:t.Id}).then(function(e){200==e.data.code?(a.$message.success(e.data.description),a.getDataList()):a.$message.error(e.data.description)})})},openAddUsersDialog:function(){this.dialogVisible=!0},handleAddUsers:function(){var e=this;this.$refs.addUsers.validate(function(t){t&&(e.formLabelAlign.Password=hex_sha1(e.formLabelAlign.Password),e.$http.post("/user/createOrUpdate",e.formLabelAlign).then(function(t){200==t.data.code?(e.$message.success(t.data.description),e.getDataList(),e.dialogVisible=!1,e.$refs.addUsers.resetFields()):e.$message.error(t.data.description)}))})},updatePwd:function(e){var t=this;this.$confirm("确认将该管理员的密码重置为123456?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/user/updatePwd",{Id:e.Id,Password:hex_sha1("123456")}).then(function(e){200==e.data.code?t.$message.success(e.data.description):t.$message.error(e.data.description)})})},handleIconClick:function(){var e=this;this.$http.get("/User/List",{params:{RealName:this.keyWord}}).then(function(t){200==t.data.Code?e.dataList=t.data.Data.ItemList:e.$message({message:t.data.Description,type:"error"})})},handleSizeChange:function(e){this.pageCount=e,this.currentPage=1,this.getDataList()},handleCurrentChange:function(e){this.currentPage=e,console.log("in"),this.getDataList()}},mounted:function(){var e=this;this.setWindow(window.innerWidth,window.innerHeight),this.getDataList(""),this.getDataList(!0),this.getDataList(!1),window.onresize=function(){e.setWindow(window.innerWidth,window.innerHeight)}}}},584:function(e,t,a){t=e.exports=a(555)(!1),t.push([e.i,".side-bar{background:#eef1ec}.el-table__body-wrapper{overflow:hidden!important}",""])},596:function(e,t,a){var s=a(584);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(556)("1b6c4155",s,!0)},613:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index-cont",style:{height:e.winHeight+"px",width:"92%",margin:"30px auto"}},[e._m(0),e._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[e.isSuperAdmin?a("el-button",{attrs:{size:"success",icon:"el-icon-plus"},on:{click:e.openAddUsersDialog}},[e._v("新增管理员")]):a("span",[e._v(" ")])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入管理员账号或昵称查找","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getDataList(t):null}},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{"margin-top":"30px"},attrs:{data:e.dataList,border:!0}},[a("el-table-column",{attrs:{prop:"Id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"NickName",label:"昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Account",label:"账号","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CreateTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.UserType?a("el-tag",{attrs:{type:"success"}},[e._v("超级管理员")]):e._e(),e._v(" "),1==t.row.UserType?a("el-tag",{attrs:{type:"info"}},[e._v("普通用户")]):e._e(),e._v(" "),2==t.row.UserType?a("el-tag",{attrs:{type:"warning"}},[e._v("管理员")]):e._e()]}}])}),e._v(" "),e.isSuperAdmin?a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.updatePwd(t.row)}}},[e._v("重置密码")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("\n            删除\n          ")])]}}])}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"新增管理员",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addUsers",attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.formLabelAlign,rules:e.formRules}},[a("el-form-item",{attrs:{label:"账号",prop:"Account"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入管理员账号"},model:{value:e.formLabelAlign.Account,callback:function(t){e.$set(e.formLabelAlign,"Account",t)},expression:"formLabelAlign.Account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"Password"}},[a("el-input",{staticClass:"input-width",attrs:{type:"password",placeholder:"请输入管理员密码"},model:{value:e.formLabelAlign.Password,callback:function(t){e.$set(e.formLabelAlign,"Password",t)},expression:"formLabelAlign.Password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"NickName"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入管理员昵称"},model:{value:e.formLabelAlign.NickName,callback:function(t){e.$set(e.formLabelAlign,"NickName",t)},expression:"formLabelAlign.NickName"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddUsers}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageCount,layout:"total, sizes, prev, pager, next",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-page-title"},[a("h3",[e._v("\n       管理员管理\n     ")]),e._v(" "),a("span",{staticClass:"yellow-place"})])}]}}});