webpackJsonp([2],{564:function(e,t,n){n(597);var i=n(221)(n(577),n(613),null,null);e.exports=i.exports},566:function(e,t,n){e.exports=n.p+"static/img/login-start.b753f41.png"},577:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__(580),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_qs__=__webpack_require__(223),__WEBPACK_IMPORTED_MODULE_1_qs___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_qs__);__webpack_exports__.default={name:"login",data:function data(){var CheckLoginPsd=function(e,t,n){return""===t?n(new Error("密码不能为空！")):n()};return{winWidth:window.innerWidth,winHeight:window.innerHeight,imgWidth:0,headTop:-50,headShakeTimer:null,imgLeft:0,formOpacity:0,formLeft:75,loading:!1,userInfo:{Account:"",Password:""},isChange:!1,winSize:{width:"",height:""},remember:eval(sessionStorage.getItem("remember"))||eval(localStorage.getItem("remember")),rule_data:{Account:[{required:!0,message:"用户名不能为空！",trigger:"blur"}],Password:[{validator:CheckLoginPsd,required:!0,trigger:"blur"}]}}},methods:{setLoginSize:function(){this.winWidth=window.innerWidth,this.winHeight=window.innerHeight},headTopAnimate:function(){var e=this,t=setInterval(function(){if(e.headTop>=50)return void clearInterval(t);e.headTop+=1},10)},headShakeAnimate:function(){this.$refs.headShake.className="flip animated infinite"},clearHeadShakeAnimate:function(){this.$refs.headShake.className=""},imgAnimation1:function(){var e=this,t=setInterval(function(){if(e.imgWidth>=e.winWidth/5)return void clearInterval(t);e.imgWidth++},5)},openLoginForm:function(){var e=this,t=null;-30==this.imgLeft?(this.$refs.userInfo.resetFields(),this.imgWidth=this.winWidth/5,this.imgLeft=0,t=setInterval(function(){if(e.formOpacity<0)return e.formOpacity=0,e.formLeft=75,void clearInterval(t);e.formOpacity-=.01,e.formLeft+=.25},3)):(this.imgWidth=this.winWidth/10,this.imgLeft=-30,t=setInterval(function(){if(e.formOpacity>1)return e.formOpacity=1,e.formLeft=50,void clearInterval(t);e.formOpacity+=.01,e.formLeft-=.25},3))},tabKey:function(e){9==e.keyCode&&(e.preventDefault(),this.$refs.pwdInput.focus())},setLoginFormData:function setLoginFormData(){var remember=localStorage.getItem("remember")||"false";"true"!=remember&&"false"!=remember&&(remember="false"),this.remember=eval(remember),this.userInfo.Account=localStorage.getItem("Account")||"",this.remember&&(this.userInfo.Password=localStorage.getItem("Password")||"")},loginIn:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var n=localStorage.getItem("Password")?localStorage.getItem("Password"):"";t.userInfo.Password!==n&&(t.userInfo.Password=hex_sha1(t.userInfo.Password)),t.loading=!0,t.userInfo.random=Math.random(),t.$http.post("/user/login",t.userInfo).then(function(e){t.loading=!1,200==e.data.code?(1==t.remember?localStorage.setItem("Password",t.userInfo.Password):localStorage.removeItem("Password"),localStorage.setItem("Account",t.userInfo.Account),localStorage.setItem("remember",t.remember),sessionStorage.setItem("userInfo",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(e.data.data)),sessionStorage.setItem("userId",e.data.data.Id),t.$message({message:"欢迎登录KOI后台管理系统",type:"success"}),t.$router.push({path:"/admin",query:{}})):(t.$message({message:e.data.description,type:"error"}),t.userInfo.Password="")})})},reset:function(e){this.$refs[e].resetFields()}},mounted:function(){var e=this;this.setLoginSize(),window.onresize=function(){e.setLoginSize()},this.headTopAnimate(),setTimeout(function(){e.imgAnimation1()},800),this.setLoginFormData()},watch:{winWidth:function(e){this.imgWidth=-30==this.imgLeft?e/10:e/5},remember:function(e){localStorage.setItem("remember",e)}}}},580:function(e,t,n){e.exports={default:n(581),__esModule:!0}},581:function(e,t,n){var i=n(27),o=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},585:function(e,t,n){t=e.exports=n(553)(!1),t.push([e.i,"",""])},597:function(e,t,n){var i=n(585);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(554)("0157d1f8",i,!0)},613:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login",style:{width:e.winWidth+"px",height:e.winHeight+"px"}},[i("h1",{ref:"headShake",style:{top:e.headTop+"px",opacity:e.headTop/100*2}},[e._v("\n\n     欢迎登陆NOVEN的专属API管理后台\n   ")]),e._v(" "),i("img",{staticClass:"login-start",style:{left:e.imgLeft+"%"},attrs:{src:n(566),width:e.imgWidth},on:{mouseenter:function(t){e.imgWidth*=1.1},mouseleave:function(t){e.imgWidth/=1.1},click:e.openLoginForm}}),e._v(" "),i("div",{staticClass:"content"},[i("el-form",{ref:"userInfo",staticClass:"card-box loginform",style:{left:e.formLeft+"%",opacity:e.formOpacity},attrs:{"label-position":"left","label-width":"0px",model:e.userInfo,rules:e.rule_data},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginIn("userInfo")}}},[i("div",{staticStyle:{"text-align":"center"}}),e._v(" "),i("h3",{staticClass:"title"},[e._v("您好，管理员")]),e._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"text"}}),e._v(" "),i("input",{staticStyle:{display:"none"},attrs:{type:"password"}}),e._v(" "),i("el-form-item",{attrs:{prop:"Account"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",placeholder:"用户名/邮箱"},on:{change:function(t){e.isChange=!0}},nativeOn:{keydown:function(t){e.tabKey(t)}},model:{value:e.userInfo.Account,callback:function(t){e.$set(e.userInfo,"Account",t)},expression:"userInfo.Account"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-mobile-phone"})])],2)],1),e._v(" "),i("el-form-item",{attrs:{prop:"Password"}},[i("el-input",{ref:"pwdInput",attrs:{type:"password","auto-complete":"off",placeholder:"密码",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginIn("userInfo")},change:function(t){e.isChange=!0}},model:{value:e.userInfo.Password,callback:function(t){e.$set(e.userInfo,"Password",t)},expression:"userInfo.Password"}},[i("template",{slot:"prepend"},[i("i",{staticClass:"el-icon-time"})])],2)],1),e._v(" "),i("el-col",{attrs:{span:e.loading?2:5}},[i("el-form-item",[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"记住密码",placement:"bottom"}},[i("el-switch",{model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:7}},[e._v("\n              \n            ")]),e._v(" "),i("el-col",{attrs:{span:e.loading?15:12}},[i("el-form-item",[i("el-button",{staticStyle:{background:"transparent"},attrs:{type:"primary",icon:e.loading?"el-icon-loading":"",disabled:e.loading},on:{click:function(t){e.loginIn("userInfo")}}},[e._v("\n               "+e._s(e.loading?"登录中...":"登录")+"\n             ")]),e._v(" "),i("el-button",{staticStyle:{background:"transparent",color:"white"},on:{click:function(t){e.reset("userInfo")}}},[e._v("重置")])],1)],1)],1)],1)])},staticRenderFns:[]}}});